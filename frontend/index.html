<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dog Meal Planner</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="header">
        <div>
          <p class="eyebrow">HAVOC-7B Nutrition Console</p>
          <h1>Dog Meal Planner</h1>
          <p>
            Build precise meal plans with AAFCO-aligned nutrition targets, realtime energy
            estimates, and structured recipe tracking.
          </p>
        </div>
        <div class="header-actions">
          <button class="ghost" id="load-plan" type="button">Load saved plan</button>
          <button class="ghost" id="save-plan" type="button">Save plan</button>
          <button class="ghost" id="reset-plan" type="button">Reset</button>
        </div>
      </header>

      <section class="card hero">
        <div class="hero-copy">
          <h2>Daily Energy Snapshot</h2>
          <p>
            Track resting energy requirements (RER), MER factors, and meal-level pacing as you
            build each recipe.
          </p>
          <div class="pill-row" id="meal-tags"></div>
        </div>
        <div class="hero-metrics">
          <article class="metric-card">
            <p>RER (kcal/day)</p>
            <h3 id="rer-value">0</h3>
            <span class="metric-note">70 × weight<sup>0.75</sup></span>
          </article>
          <article class="metric-card">
            <p>Target MER (kcal/day)</p>
            <h3 id="mer-value">0</h3>
            <span class="metric-note" id="mer-factor-label">Factor 1.6</span>
          </article>
          <article class="metric-card">
            <p>Food + treats (kcal)</p>
            <h3 id="food-kcal">0</h3>
            <span class="metric-note" id="per-meal-kcal">0 per meal</span>
          </article>
        </div>
        <div class="progress">
          <div class="progress__fill" id="kcal-progress"></div>
        </div>
      </section>

      <section class="card">
        <h2>Dog Profile</h2>
        <div class="grid">
          <label>
            Weight (kg)
            <input type="number" step="0.1" min="0" id="dog-weight" value="12" />
          </label>
          <label>
            Target weight (kg)
            <input type="number" step="0.1" min="0" id="dog-target-weight" placeholder="Optional" />
          </label>
          <label>
            Age (years)
            <input type="number" step="0.1" min="0" id="dog-age" value="3" />
          </label>
          <label>
            Sex
            <select id="dog-sex">
              <option value="female">Female</option>
              <option value="male">Male</option>
            </select>
          </label>
          <label>
            Neutered
            <select id="dog-neutered">
              <option value="true">Yes</option>
              <option value="false">No</option>
            </select>
          </label>
          <label>
            Activity
            <input type="text" id="dog-activity" value="moderate" />
          </label>
          <label>
            MER factor
            <select id="mer-factor">
              <option value="neutered_adult">Neutered adult (1.6)</option>
              <option value="intact_adult">Intact adult (1.8)</option>
              <option value="weight_loss">Weight loss (1.1)</option>
              <option value="weight_gain">Weight gain (1.8)</option>
              <option value="puppy_low">Puppy low (2.0)</option>
              <option value="puppy_high">Puppy high (3.0)</option>
            </select>
          </label>
          <label>
            Treat calories (kcal)
            <input type="number" step="1" min="0" id="treats-kcal" value="50" />
          </label>
          <label>
            Meals (comma-separated)
            <input type="text" id="meals" value="breakfast,dinner" />
          </label>
        </div>
        <div class="tip-row">
          <div>
            <h3>Insights</h3>
            <ul>
              <li>Use target weight to guide gradual weight changes.</li>
              <li>Match MER factors to current activity and growth stage.</li>
              <li>Include treats in total energy to avoid overfeeding.</li>
            </ul>
          </div>
          <div class="callout">
            <p class="callout-title">Meal pacing</p>
            <p id="meal-pacing">Add meals to see the per-meal target.</p>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Kibble</h2>
        <div class="grid">
          <label>
            Name
            <input type="text" id="kibble-name" value="Premium Kibble" />
          </label>
          <label>
            Kcal per 100g
            <input type="number" step="0.1" min="0" id="kibble-kcal" value="380" />
          </label>
          <label>
            Grams fed
            <input type="number" step="1" min="0" id="kibble-grams" value="120" />
          </label>
        </div>
        <details class="details">
          <summary>Optional kibble nutrients per 100g</summary>
          <div class="grid nutrients" data-prefix="kibble">
            <label>Protein (g)<input type="number" step="0.1" min="0" data-field="protein_g" /></label>
            <label>Fat (g)<input type="number" step="0.1" min="0" data-field="fat_g" /></label>
            <label>Carbs (g)<input type="number" step="0.1" min="0" data-field="carbs_g" /></label>
            <label>Calcium (mg)<input type="number" step="0.1" min="0" data-field="calcium_mg" /></label>
            <label>Phosphorus (mg)<input type="number" step="0.1" min="0" data-field="phosphorus_mg" /></label>
            <label>Iron (mg)<input type="number" step="0.1" min="0" data-field="iron_mg" /></label>
            <label>Zinc (mg)<input type="number" step="0.1" min="0" data-field="zinc_mg" /></label>
            <label>Vitamin A (IU)<input type="number" step="0.1" min="0" data-field="vitamin_a_iu" /></label>
            <label>Vitamin D (IU)<input type="number" step="0.1" min="0" data-field="vitamin_d_iu" /></label>
            <label>Vitamin E (mg)<input type="number" step="0.1" min="0" data-field="vitamin_e_mg" /></label>
          </div>
        </details>
      </section>

      <section class="card">
        <div class="section-header">
          <h2>Homemade Recipe</h2>
          <button class="ghost" id="add-item" type="button">Add ingredient</button>
        </div>
        <div id="recipe-items" class="stack"></div>
        <div class="summary-row">
          <div>
            <h3>Recipe totals</h3>
            <p class="muted">Calculated from recipe ingredient inputs.</p>
          </div>
          <div class="summary-grid">
            <div>
              <span>Recipe kcal</span>
              <strong id="recipe-kcal">0</strong>
            </div>
            <div>
              <span>Protein g</span>
              <strong id="recipe-protein">0</strong>
            </div>
            <div>
              <span>Fat g</span>
              <strong id="recipe-fat">0</strong>
            </div>
            <div>
              <span>Carbs g</span>
              <strong id="recipe-carbs">0</strong>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="section-header">
          <h2>Plan Results</h2>
          <button id="compute" type="button">Compute plan</button>
        </div>
        <div class="status-row" id="status-row"></div>
        <pre id="result" aria-live="polite">Fill the form and click “Compute plan”.</pre>
      </section>
    </main>

    <template id="item-template">
      <article class="recipe-item">
        <div class="section-header">
          <h3>Ingredient</h3>
          <button class="ghost remove" type="button">Remove</button>
        </div>
        <div class="grid">
          <label>
            Name
            <input type="text" data-field="name" value="Chicken" />
          </label>
          <label>
            Kcal per 100g
            <input type="number" step="0.1" min="0" data-field="kcal_per_100g" value="165" />
          </label>
          <label>
            Grams in recipe
            <input type="number" step="1" min="0" data-field="grams" value="100" />
          </label>
        </div>
        <details class="details">
          <summary>Optional nutrients per 100g</summary>
          <div class="grid nutrients" data-prefix="recipe">
            <label>Protein (g)<input type="number" step="0.1" min="0" data-field="protein_g" /></label>
            <label>Fat (g)<input type="number" step="0.1" min="0" data-field="fat_g" /></label>
            <label>Carbs (g)<input type="number" step="0.1" min="0" data-field="carbs_g" /></label>
            <label>Calcium (mg)<input type="number" step="0.1" min="0" data-field="calcium_mg" /></label>
            <label>Phosphorus (mg)<input type="number" step="0.1" min="0" data-field="phosphorus_mg" /></label>
            <label>Iron (mg)<input type="number" step="0.1" min="0" data-field="iron_mg" /></label>
            <label>Zinc (mg)<input type="number" step="0.1" min="0" data-field="zinc_mg" /></label>
            <label>Vitamin A (IU)<input type="number" step="0.1" min="0" data-field="vitamin_a_iu" /></label>
            <label>Vitamin D (IU)<input type="number" step="0.1" min="0" data-field="vitamin_d_iu" /></label>
            <label>Vitamin E (mg)<input type="number" step="0.1" min="0" data-field="vitamin_e_mg" /></label>
          </div>
        </details>
      </article>
    </template>

    <script src="/static/app.js"></script>
  </body>
</html>
